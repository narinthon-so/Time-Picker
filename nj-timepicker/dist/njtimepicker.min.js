!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("NJTimePicker",t):(e=e||self).NJTimePicker=t()}(this,function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?a(e):t}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var r=s(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}var h=function e(){t(this,e);var n=document.createElement("div");return n.className="nj-overlay",n};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var f=function(e,t){return e(t={exports:{}},t.exports),t.exports}(function(e,n){e.exports=function(){function e(){t(this,e),this.events={},this.listeners={}}return i(e,[{key:"on",value:function(e,t,n){if("function"!=typeof t)throw"invalid listener.";var i=n||Math.random().toString(36).substring(7);return(this.events[e]=this.events[e]||[]).push(i),this.listeners[i]={cb:t,ev:e},i}},{key:"once",value:function(e,t,n){var i=this.on(e,t,n);this.listeners[i].once=!0}},{key:"off",value:function(e){var t=this;if(this.events[e])this.events[e].forEach(function(e){delete t.listeners[e]}),delete this.events[e];else if(this.listeners[e]){var n=this.listeners[e];this.events[n.ev].splice(e,1),delete this.listeners[e]}}},{key:"emit",value:function(e){var t=this,n=[].slice.call(arguments,1);(this.events[e]||[]).forEach(function(i){var r=t.listeners[i];r.cb(1==n.length?n[0]:n),r.once&&t.off(e)})}}]),e}()}),m=function(){function e(n,i){t(this,e),this.config=n,this.emitter=i,this.resetValue()}return i(e,[{key:"build",value:function(e){var t=e.type,n=e.headerText;this.element=document.createElement("div"),this.element.className="nj-".concat(t,"-container"),this.createHeader({className:"nj-section-header",innerText:n||t,element:this.element})}},{key:"createHeader",value:function(e){var t=e.className,n=e.innerText,i=e.element,r=document.createElement("div");r.className=t,r.innerText=n,i.append(r)}},{key:"createItem",value:function(e){var t=e.container,n=e.innerText,i=e.disabled,r=document.createElement("div");r.className="nj-item",r.innerText=n,r.setAttribute("data",n.toString().toLowerCase()),i&&r.setAttribute("disabled","disabled"),r.onclick=this.itemClick.bind(this,r),t.append(r)}},{key:"itemClick",value:function(e){e.hasAttribute("disabled")||(this.currentSelection&&this.currentSelection.classList.remove("selected"),e.classList.add("selected"),this.currentSelection=e,this.currentValue=e.getAttribute("data"),this.emitter.emit("selection"))}},{key:"setValue",value:function(e){var t=this.element.querySelector('div[data="'.concat(e,'"]'));t&&this.itemClick(t)}},{key:"getValue",value:function(){return this.currentValue}},{key:"resetValue",value:function(){this.currentSelection&&this.currentSelection.classList.remove("selected"),this.currentSelection=this.currentValue=null}}]),e}(),d=function(e){r(o,m);var n=u(o);function o(e,i){var r,c;return t(this,o),l((r=a(c=n.call(this,e,i)),s(o.prototype)),"build",r).call(r,{type:"hours",headerText:c.config.texts.hours}),c.createButtons(),c}return i(o,[{key:"createButtons",value:function(){var e=document.createElement("div");e.className="nj-hours-wrapper";for(var t="12"==this.config.format?12:23,n="12"==this.config.format?1:0,i=Array.isArray(this.config.disabledHours)?this.config.disabledHours:[],r=n;r<=t;r++)l(s(o.prototype),"createItem",this).call(this,{container:e,innerText:r,disabled:i.includes(r)});this.element.append(e)}}]),o}(),p=function(e){r(o,m);var n=u(o);function o(e,i){var r,c;return t(this,o),l((r=a(c=n.call(this,e,i)),s(o.prototype)),"build",r).call(r,{type:"minutes",headerText:c.config.texts.minutes}),c.createButtons(),c}return i(o,[{key:"createButtons",value:function(){var e=this,t=document.createElement("div");t.className="nj-minutes-wrapper";var n=this.config.minutes||[0,15,30,45],i=Array.isArray(this.config.disabledMinutes)?this.config.disabledMinutes:[];n.forEach(function(n){"number"==typeof n&&n<60&&l(s(o.prototype),"createItem",e).call(e,{container:t,innerText:n,disabled:i.includes(n)})}),this.element.append(t)}}]),o}(),v=function(e){r(o,m);var n=u(o);function o(e,i){var r,c;return t(this,o),(c=n.call(this,e,i)).config=e,c.currentSelection=null,c.currentValue=null,l((r=a(c),s(o.prototype)),"build",r).call(r,{type:"ampm",headerText:c.config.texts.ampm||"AM/PM"}),c.createButtons(),c}return i(o,[{key:"createButtons",value:function(){var e=document.createElement("div");e.className="nj-ampm-wrapper",l(s(o.prototype),"createItem",this).call(this,{container:e,innerText:"AM"}),l(s(o.prototype),"createItem",this).call(this,{container:e,innerText:"PM"}),this.element.append(e)}}]),o}(),y=function(){function e(n){t(this,e),this.config=n,this.build()}return i(e,[{key:"build",value:function(){this.element=document.createElement("div"),this.element.className="nj-header-container",this.config.headerText&&console.warn("headerText is deprecated and will be removed soon. Please use texts.header instead."),this.element.textContent=this.config.headerText||this.config.texts.header}}]),e}(),g=function(){function e(n,i){t(this,e),this.config=n,this.emitter=i}return i(e,[{key:"build",value:function(){return this.element=document.createElement("div"),this.element.className="nj-action-container",this.createButton({type:"save",text:this.config.texts.save||"Save"}),this.createButton({type:"clear",text:this.config.texts.clear||"Clear"}),this.createButton({type:"close",text:this.config.texts.close||"Close"}),this.element}},{key:"createButton",value:function(e){var t=this,n=e.type,i=e.text,r=document.createElement("div");r.className="nj-action-button nj-action-".concat(n),r.innerText=i,r.onclick=function(){t.emitter.emit("btn-".concat(n))},this.element.append(r)}}]),e}();return function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,n),this.checkTarget(e.targetEl||e.targetID),this.config=this.extend({options:e}),this.emitter=new f,this.pickerVisible=!1,this.allowAutoSave=!1,this.build()}return i(n,[{key:"extend",value:function(t){var n=t.target,i=void 0===n?{}:n,r=t.options,s=t.defaults,o=void 0===s?this.defaultConfig:s;return Object.keys(o).forEach(function(t){"object"==e(o[t])&&"texts"==t?(i[t]={},Object.keys(o[t]).forEach(function(e){i[t][e]=r[t]&&r[t][e]?r[t][e]:o[t][e]})):i[t]=r[t]||o[t]}),i}},{key:"checkTarget",value:function(e){if(e instanceof HTMLElement)this.targetElement=e;else{if(!document.querySelector("#".concat(e)))throw"NJPicker requires a valid target element(targetEl) or target element ID(targetID)";this.targetElement=document.querySelector("#".concat(e))}}},{key:"build",value:function(){var e=this;this.targetElement.addEventListener("click",this.show.bind(this)),this.wrapper=document.createElement("div"),this.wrapper.classList.add("nj-picker"),this.wrapper.setAttribute("id",this.config.id),this.overlay=new h,this.config.clickOutsideToClose&&this.overlay.addEventListener("click",this.hide.bind(this)),this.wrapper.append(this.overlay),this.container=document.createElement("div"),this.container.classList.add("nj-picker-container"),(this.config.headerText||this.config.texts.header)&&(this.header=new y(this.config),this.container.append(this.header.element)),this.buildItems(),this.buildButtons(),this.wrapper.append(this.container),document.body.append(this.wrapper),setTimeout(function(){e.emitter.emit("ready",{})}),this.emitter.on("selection",function(){if(e.pickerVisible&&e.config.autoSave&&e.allowAutoSave){var t=e.getValue();t.hours&&t.minutes&&t.ampm&&e.onSave()}})}},{key:"buildButtons",value:function(){var e=this;this.buttons=new g(this.config,this.emitter),this.emitter.on("btn-save",function(){"text"==e.targetElement.type&&"INPUT"===e.targetElement.nodeName&&(e.targetElement.value=e.getValue().fullResult),e.onSave()}),this.emitter.on("btn-clear",function(){e.hours.resetValue(),e.minutes.resetValue(),"12"==e.config.format&&e.ampm.resetValue(),e.emitter.emit("clear")}),this.emitter.on("btn-close",function(){e.emitter.emit("close"),e.hide()}),this.container.append(this.buttons.build(this.config))}},{key:"buildItems",value:function(){this.hours=new d(this.config,this.emitter),this.container.append(this.hours.element),this.minutes=new p(this.config,this.emitter),this.container.append(this.minutes.element),"12"==this.config.format&&(this.ampm=new v(this.config,this.emitter),this.container.append(this.ampm.element))}},{key:"onSave",value:function(){this.emitter.emit("save",this.getValue()),this.hide()}},{key:"getValue",value:function(e){var t={hours:this.hours.getValue(),minutes:this.minutes.getValue(),fullResult:void 0};return"12"==this.config.format?(t.ampm=this.ampm.getValue(),t.hours&&t.minutes&&t.ampm&&(t.fullResult="".concat(("0"+t.hours).slice(-2),":").concat(("0"+t.minutes).slice(-2)," ").concat(t.ampm))):t.hours&&t.minutes&&(t.fullResult="".concat(("0"+t.hours).slice(-2),":").concat(("0"+t.minutes).slice(-2))),e?t[e]:t||{}}},{key:"setValue",value:function(t){if("string"==typeof t)try{var n=t.split(":");if(void 0!==n[0]&&""!=n[0]&&this.hours.setValue(n[0]),void 0!==n[1]&&""!=n[1]){var i=n[1].split(" ");this.minutes.setValue(i[0]),this.ampm.setValue(i[1])}}catch(e){}else if("object"==e(t))for(var r in t)t[r]&&this[r]&&this[r].setValue&&this[r].setValue(t[r].toString().toLowerCase())}},{key:"show",value:function(){var e=this.getValue();this.allowAutoSave=!(e.hours&&e.minutes&&e.ampm),this.pickerVisible=!0,this.wrapper.classList.add("nj-picker-show"),this.emitter.emit("show")}},{key:"hide",value:function(){this.pickerVisible=!1,this.wrapper.classList.remove("nj-picker-show"),this.emitter.emit("hide")}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"defaultConfig",get:function(){return{clickOutsideToClose:!0,autoSave:!1,disabledMinutes:[],disabledHours:[],format:"12",texts:{header:"",hours:"Hours",minutes:"Minutes",close:"Close",save:"Save",clear:"Clear",ampm:"AM/PM"},headerText:"",id:Math.random().toString(36).substring(7),minutes:[0,15,30,45],targetEl:null,targetID:null}}}],[{key:"version",get:function(){return"1.3.118"}}]),n}()});